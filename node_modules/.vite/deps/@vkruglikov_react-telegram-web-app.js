import {
  require_react
} from "./chunk-RLJ2RCJQ.js";
import {
  __toESM
} from "./chunk-DC5AMYBS.js";

// node_modules/@vkruglikov/react-telegram-web-app/lib/react-telegram-web-app.modern.js
var import_react = __toESM(require_react());
var s = () => {
  var e2;
  return "undefined" != typeof window && null != (e2 = window) && null != (e2 = e2.Telegram) && e2.WebApp ? window.Telegram.WebApp : null;
};
var a = (0, import_react.createContext)(s());
var d = { smoothButtonsTransition: false, smoothButtonsTransitionMs: 10 };
var c = (0, import_react.createContext)(d);
var w = () => ({ MainButton: { current: null }, BackButton: { current: null } });
var v = (0, import_react.createContext)({ MainButton: { current: null }, BackButton: { current: null } });
var m = () => {
};
var p = ({ id: e2, show: n2 = m, hide: l2 = m, currentShowedIdRef: r2 }) => {
  const { smoothButtonsTransition: u2, smoothButtonsTransitionMs: i2 } = (0, import_react.useContext)(c);
  (0, import_react.useEffect)(() => (n2(), r2.current = e2, () => {
    u2 ? (r2.current = null, setTimeout(() => {
      r2.current || l2();
    }, i2)) : (l2(), r2.current = null);
  }), [l2, e2, r2, n2, u2, i2]);
};
var h = () => (0, import_react.useContext)(a);
var f = ({ text: e2 = "CONTINUE", progress: n2 = false, disable: l2, disabled: u2 = false, color: i2, textColor: s2, onClick: a2 }) => {
  const d2 = (0, import_react.useContext)(v), c2 = (0, import_react.useId)(), w2 = h(), m2 = null == w2 ? void 0 : w2.MainButton, f2 = null == w2 ? void 0 : w2.themeParams, P2 = l2 || u2;
  return (0, import_react.useEffect)(() => {
    null == m2 || m2.setParams({ color: i2 || (null == f2 ? void 0 : f2.button_color) || "#fff" });
  }, [i2, f2, m2]), (0, import_react.useEffect)(() => {
    null == m2 || m2.setParams({ text_color: s2 || (null == f2 ? void 0 : f2.button_text_color) || "#000" });
  }, [m2, f2, s2]), (0, import_react.useEffect)(() => {
    null == m2 || m2.setText(e2);
  }, [e2, m2]), (0, import_react.useEffect)(() => {
    P2 ? null == m2 || m2.disable() : P2 || null == m2 || m2.enable();
  }, [P2, m2]), (0, import_react.useEffect)(() => {
    n2 ? null == m2 || m2.showProgress(false) : n2 || null == m2 || m2.hideProgress();
  }, [n2, m2]), (0, import_react.useEffect)(() => {
    if (a2) return null == m2 || m2.onClick(a2), () => {
      null == m2 || m2.offClick(a2);
    };
  }, [a2, m2]), p({ show: null == m2 ? void 0 : m2.show, hide: null == m2 ? void 0 : m2.hide, currentShowedIdRef: d2.MainButton, id: c2 }), null;
};
var P = ({ onClick: e2 }) => {
  const n2 = (0, import_react.useContext)(v), l2 = (0, import_react.useId)(), u2 = h(), i2 = null == u2 ? void 0 : u2.BackButton;
  return (0, import_react.useEffect)(() => {
    if (e2 && i2) return i2.onClick(e2), () => {
      i2.offClick(e2);
    };
  }, [e2, i2]), p({ show: null == i2 ? void 0 : i2.show, hide: null == i2 ? void 0 : i2.hide, currentShowedIdRef: n2.BackButton, id: l2 }), null;
};
var g = () => {
  const e2 = h();
  return (0, import_react.useCallback)((n2) => new Promise((o2, t2) => {
    try {
      null == e2 || null == e2.showPopup || e2.showPopup(n2, (e3) => {
        o2(e3);
      });
    } catch (e3) {
      t2(e3);
    }
  }), [e2]);
};
var b = () => {
  const e2 = h(), n2 = null == e2 ? void 0 : e2.HapticFeedback;
  return [(0, import_react.useCallback)((...e3) => null == n2 ? void 0 : n2.impactOccurred(...e3), [n2]), (0, import_react.useCallback)((...e3) => null == n2 ? void 0 : n2.notificationOccurred(...e3), [n2]), (0, import_react.useCallback)((...e3) => null == n2 ? void 0 : n2.selectionChanged(...e3), [n2])];
};
var T = () => {
  const e2 = h(), [n2, o2] = (0, import_react.useState)(null == e2 ? void 0 : e2.colorScheme), [r2, u2] = (0, import_react.useState)((null == e2 ? void 0 : e2.themeParams) || {});
  return (0, import_react.useEffect)(() => {
    if (!e2) return;
    const n3 = () => {
      o2(e2.colorScheme), u2(e2.themeParams);
    };
    return e2.onEvent("themeChanged", n3), () => {
      e2.offEvent("themeChanged", n3);
    };
  }, [e2]), [n2, r2];
};
var B = () => {
  const e2 = h();
  return [(0, import_react.useCallback)((...n2) => null == e2 || null == e2.showScanQrPopup ? void 0 : e2.showScanQrPopup(...n2), [e2]), (0, import_react.useCallback)(() => null == e2 || null == e2.closeScanQrPopup ? void 0 : e2.closeScanQrPopup(), [e2])];
};
var x = () => {
  const e2 = h();
  return (0, import_react.useCallback)(() => new Promise((n2) => {
    null == e2 || null == e2.readTextFromClipboard || e2.readTextFromClipboard(n2);
  }), [e2]);
};
var y = () => {
  const e2 = h();
  return (0, import_react.useCallback)((...n2) => null == e2 || null == e2.switchInlineQuery ? void 0 : e2.switchInlineQuery(...n2), [e2]);
};
var C = () => {
  const e2 = h(), [n2, o2] = (0, import_react.useState)(null == e2 ? void 0 : e2.isExpanded);
  return (0, import_react.useEffect)(() => {
    if (!e2) return;
    const n3 = (n4) => {
      n4.isStateStable && o2(e2.isExpanded);
    };
    return e2.onEvent("viewportChanged", n3), () => e2.offEvent("viewportChanged", n3);
  }, [e2]), [n2, (0, import_react.useCallback)(() => null == e2 || null == e2.expand ? void 0 : e2.expand(), [e2])];
};
var E = () => {
  var e2;
  const n2 = null == (e2 = h()) ? void 0 : e2.CloudStorage, o2 = (0, import_react.useCallback)((e3) => new Promise((o3, t3) => {
    null == n2 || n2.getItem(e3, (e4, n3) => {
      e4 ? t3(e4) : o3(n3);
    });
  }), [n2]), t2 = (0, import_react.useCallback)((e3, o3) => new Promise((t3, l3) => {
    null == n2 || n2.setItem(e3, o3, (e4, n3) => {
      !e4 && n3 ? t3() : l3(e4);
    });
  }), [n2]), l2 = (0, import_react.useCallback)((e3) => new Promise((o3, t3) => {
    null == n2 || n2.getItems(e3, (e4, n3) => {
      !e4 && n3 ? o3(n3) : t3(e4);
    });
  }), [n2]), r2 = (0, import_react.useCallback)((e3) => new Promise((o3, t3) => {
    null == n2 || n2.removeItem(e3, (e4, n3) => {
      !e4 && n3 ? o3() : t3(e4);
    });
  }), [n2]), s2 = (0, import_react.useCallback)((e3) => new Promise((o3, t3) => {
    null == n2 || n2.removeItems(e3, (e4, n3) => {
      !e4 && n3 ? o3() : t3(e4);
    });
  }), [n2]), a2 = (0, import_react.useCallback)(() => new Promise((e3, o3) => {
    null == n2 || n2.getKeys((n3, t3) => {
      !n3 && t3 ? e3(t3) : o3(n3);
    });
  }), [n2]);
  return (0, import_react.useMemo)(() => ({ getItem: o2, setItem: t2, getItems: l2, removeItem: r2, removeItems: s2, getKeys: a2 }), [n2]);
};
function I() {
  return I = Object.assign ? Object.assign.bind() : function(e2) {
    for (var n2 = 1; n2 < arguments.length; n2++) {
      var o2 = arguments[n2];
      for (var t2 in o2) Object.prototype.hasOwnProperty.call(o2, t2) && (e2[t2] = o2[t2]);
    }
    return e2;
  }, I.apply(this, arguments);
}
var k = ({ children: n2, options: o2 }) => {
  const r2 = ((e2) => {
    const [n3, o3] = (0, import_react.useState)(false);
    return (0, import_react.useEffect)(() => {
      var n4;
      if (!e2) return;
      if (null != (n4 = window.Telegram) && n4.WebApp) return void o3(true);
      const t2 = "undefined" != typeof window && window.TelegramWebviewProxy && window.TelegramWebviewProxy.postEvent;
      window.TelegramWebviewProxy ? window.TelegramWebviewProxy.postEvent = (...e3) => {
        var n5;
        null == t2 || t2(...e3), null != (n5 = window.Telegram) && n5.WebApp && (o3(true), window.TelegramWebviewProxy.postEvent = t2);
      } : window.TelegramWebviewProxy = { postEvent: (...e3) => {
        var n5;
        null == t2 || t2(...e3), null != (n5 = window.Telegram) && n5.WebApp && (o3(true), delete window.TelegramWebviewProxy);
      } };
    }, [e2]), n3;
  })(!(null == o2 || !o2.async)), u2 = (0, import_react.useMemo)(() => I({}, d, o2), [o2]), m2 = (0, import_react.useMemo)(w, []), p2 = (0, import_react.useMemo)(s, [r2]);
  return (0, import_react.useEffect)(() => {
    if (null == o2 || !o2.smoothButtonsTransition) return;
    const e2 = () => {
      var e3, n3;
      null == p2 || null == (e3 = p2.MainButton) || e3.hide(), null == p2 || null == (n3 = p2.BackButton) || n3.hide();
    };
    return window.addEventListener("beforeunload", e2), () => window.removeEventListener("beforeunload", e2);
  }, [p2, null == o2 ? void 0 : o2.smoothButtonsTransition]), import_react.default.createElement(v.Provider, { value: m2 }, import_react.default.createElement(a.Provider, { value: p2 }, import_react.default.createElement(c.Provider, { value: u2 }, n2)));
};
var S = () => {
  const e2 = h();
  return [null == e2 ? void 0 : e2.initDataUnsafe, null == e2 ? void 0 : e2.initData];
};
var W = () => h();
export {
  P as BackButton,
  f as MainButton,
  k as WebAppProvider,
  E as useCloudStorage,
  C as useExpand,
  b as useHapticFeedback,
  S as useInitData,
  x as useReadTextFromClipboard,
  B as useScanQrPopup,
  g as useShowPopup,
  y as useSwitchInlineQuery,
  T as useThemeParams,
  W as useWebApp
};
//# sourceMappingURL=@vkruglikov_react-telegram-web-app.js.map
